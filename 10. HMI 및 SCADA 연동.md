# 10. HMI 및 SCADA 연동

## 10.1 HMI와 PLC 연결 개념

*(사람과 기계가 통신하는 핵심 인터페이스 구조의 본질적 개념 정리)*

------

### ✅ 개요

**HMI (Human Machine Interface)**는 사람이 PLC 기반 자동화 시스템을 **직관적이고 쉽게 제어하고 모니터링**하도록 만들어진 인터페이스다.
 HMI는 PLC와 **실시간 통신**을 수행하며, 장비 상태 확인, 명령 송신, 경고 감시 등 모든 운영자의 눈과 손 역할을 수행한다.

------

### ✅ 1. HMI와 PLC의 관계

| 역할    | 설명                                                |
| ------- | --------------------------------------------------- |
| **PLC** | 장비의 실제 동작 제어, 센서/액추에이터 연결         |
| **HMI** | PLC 내부 데이터를 시각화, 명령 송신 인터페이스 제공 |

```
운영자 → HMI → PLC → 기계 제어 → PLC → HMI → 운영자
```

- HMI는 **직접 기계를 제어하지 않음** → 항상 PLC를 통해 간접 제어

------

### ✅ 2. 통신 방식의 본질

#### 📌 **HMI는 PLC의 변수 태그와 통신**

- PLC 내부의 **메모리 변수(태그, 레지스터, 메모리 주소)** 를 읽고 씀
- PLC와 HMI는 공통 통신 프로토콜을 사용해 태그에 접근

#### 📌 데이터 흐름 예시

| 동작        | 흐름                                               |
| ----------- | -------------------------------------------------- |
| 버튼 누름   | HMI → PLC: "StartMotor" 변수 TRUE 설정             |
| 센서값 보기 | PLC → HMI: "Temperature" 값 읽어와 화면 표시       |
| 알람 발생   | PLC → HMI: "AlarmOverheat" 태그 TRUE → 경고등 표시 |

------

### ✅ 3. 주요 통신 프로토콜

| 프로토콜              | 특징                    | 제조사            |
| --------------------- | ----------------------- | ----------------- |
| **OPC UA**            | 표준 통합, 보안 내장    | 범용              |
| **Profinet**          | 이더넷 기반 실시간 통신 | Siemens           |
| **EtherNet/IP**       | 태그 기반 통신          | Allen-Bradley     |
| **MODBUS TCP**        | 범용 이더넷 통신        | 모든 제조사       |
| **MODBUS RTU**        | RS-485 시리얼 통신      | 모든 제조사       |
| **MC Protocol, FINS** | 제조사 전용 시리얼      | Mitsubishi, Omron |

> 대부분의 상용 HMI는 여러 PLC 브랜드를 지원하는 **통합 드라이버 라이브러리** 내장

------

### ✅ 4. HMI ↔ PLC 연결 흐름 구조

```
[ 운영자 입력 ]
      ↓
[ HMI 화면 오브젝트 ]
      ↓
[ HMI 내부 태그 ]
      ↓
[ 통신 드라이버 ]
      ↓
[ PLC 변수(메모리 영역) ]
      ↓
[ 실제 제어 동작 ]
```

- 운영자는 화면의 버튼이나 입력창을 조작
- HMI가 PLC의 변수 메모리에 실시간 접근

------

### ✅ 5. 주요 연결 방식

| 연결 유형                  | 설명                    | 실무 예시             |
| -------------------------- | ----------------------- | --------------------- |
| **직결**                   | HMI 패널과 PLC 1:1 연결 | 단일 기계 로컬 패널   |
| **네트워크 연결**          | HMI ↔ PLC 다수 연결     | SCADA, 복수 장비 통합 |
| **Remote HMI (원격 접근)** | 모바일, 클라우드 HMI    | 스마트폰 모니터링 앱  |

------

### ✅ 6. HMI 설계 시 필수 고려 요소

| 항목                   | 설명                                   |
| ---------------------- | -------------------------------------- |
| **통신 프로토콜 설정** | PLC와 동일 통신 방식, IP, 포트 확인    |
| **태그 매핑 정확성**   | HMI 태그 ↔ PLC 변수 정확히 일치해야 함 |
| **통신 속도 설정**     | 데이터 읽기 주기 설정 (예: 500ms~1초)  |
| **에러 상태 표시**     | 통신 끊김 시 사용자에게 경고 표시      |
| **보안 설정**          | 로그인, 권한 제한 등 적용 가능         |

------

### ✅ 7. 간단한 실무 연결 예시

- Siemens S7-1200 ↔ Proface HMI
   → Profinet 설정 → S7-1200 DB 블록 태그 자동 매핑
- Mitsubishi Q PLC ↔ GOT2000 HMI
   → MC Protocol 설정 → 직접 내부 레지스터 (D, M 등) 접근
- LS PLC ↔ XGT Panel
   → XGT 전용 드라이버 → 직접 태그명 매칭 가능

------

### ✅ 8. HMI ↔ PLC 연결 설계 시 주의사항

| 문제             | 방지 대책                            |
| ---------------- | ------------------------------------ |
| 주소 중복 오류   | HMI-PLC 태그 동기화 관리             |
| 통신 지연        | 중요 변수는 그룹핑, 필요한 값만 갱신 |
| 장시간 통신 단절 | Watchdog, 타임아웃 기능 활용         |
| 네트워크 불안정  | 전용 스위치, 이중화 네트워크 사용    |

------

### ✅ 정리

- **HMI는 PLC의 실시간 상태를 시각화하고 명령을 전달하는 인터페이스 장치**
- HMI ↔ PLC는 항상 **통신을 통해 변수(태그)를 공유**
- **통신 설정, 태그 일치, 통신 주기 설정**이 HMI 프로젝트 설계의 핵심
- 모든 제어 권한은 항상 PLC에 있음 (HMI는 명령 인터페이스 역할)

## 10.2 터치스크린 화면 구성

*(HMI 터치 패널 설계의 화면 구조, UI/UX 구성, 태그 매핑 원칙 정리)*

------

### ✅ 개요

**터치스크린 HMI**는 현장 오퍼레이터가 가장 많이 접하는 인터페이스다.
 따라서 터치 패널 화면 설계는 단순히 미적인 문제가 아니라:

- **작업 효율성**
- **오류 방지**
- **안전성 확보**
- **실시간 피드백**

이 모든 핵심 제어 품질에 직접적으로 영향을 미친다.

------

### ✅ 1. HMI 화면 구성의 기본 원칙

| 핵심 요소   | 설계 기준                   |
| ----------- | --------------------------- |
| 직관성      | 누구나 쉽게 이해            |
| 반응성      | 실시간 빠른 피드백          |
| 오류 방지   | 오입력, 잘못된 조작 방지    |
| 단계별 이동 | 메뉴 계층화, 중요 정보 구분 |
| 일관성      | 전체 시스템 통일된 디자인   |

------

### ✅ 2. 화면 구성의 기본 레이아웃

#### 📌 기본 구조 예시

```
┌───────────────────────────────────┐
│ 상단: 상태바 (알람, 통신, 시간 등)    │
├───────────────────────────────────┤
│ 중앙: 공정 흐름도, 주요 상태 표시     │
├───────────────────────────────────┤
│ 하단: 주요 버튼 (시작, 정지, 메뉴 등) │
└───────────────────────────────────┘
```

- 상단: 전체 시스템 상태
- 중앙: 실시간 공정 흐름과 주요 수치
- 하단: 조작 버튼 및 화면 전환

------

### ✅ 3. 주요 화면 유형

| 화면 유형     | 설명                        |
| ------------- | --------------------------- |
| **메인 화면** | 공정 전체 흐름도, 설비 개요 |
| **운전 화면** | 개별 장비 제어, 상태 확인   |
| **알람 화면** | 경고, 장애 이력 조회        |
| **이력 화면** | 데이터 트렌드, 기록 조회    |
| **설정 화면** | 파라미터 입력, 관리자 설정  |

------

### ✅ 4. 버튼 설계 시 주의사항

| 요소      | 기준                                         |
| --------- | -------------------------------------------- |
| 크기      | 손가락 누르기 쉬운 최소 20~30mm 이상         |
| 색상      | 동작별 색상 통일 (녹색: 시작, 적색: 정지 등) |
| 상태 변화 | 누름/해제 상태 시각적 피드백                 |
| 이중 확인 | 위험 조작은 확인 팝업 적용                   |

------

### ✅ 5. 태그 매핑 설계

#### 📌 태그 기본 개념

| PLC 내부 태그    | HMI 연결 태그   | 설명        |
| ---------------- | --------------- | ----------- |
| `MotorRun`       | `MotorRun`      | ON/OFF 표시 |
| `Temperature`    | `TempDisp`      | 수치 표시   |
| `Alarm_Overheat` | `OverheatAlarm` | 알람 점등   |

- 모든 화면 오브젝트는 **PLC의 태그와 1:1로 연결됨**

#### 📌 HMI 내 태그 그룹 관리

- `운전 제어 그룹`
- `센서 상태 그룹`
- `알람 그룹`
- `이력 기록 그룹`

→ 그룹화하여 데이터 갱신 주기 최적화 가능

------

### ✅ 6. 알람 표시 기본 구조

| 요소           | 설명                          |
| -------------- | ----------------------------- |
| 알람 표시등    | 상단 항상 표시 (점멸 등 강조) |
| 알람 이력 화면 | 시간 순 알람 목록             |
| 알람 확인 버튼 | 수동 리셋 구조 포함           |
| 우선순위 구분  | 긴급/경고/정보 등 색상 차별화 |

------

### ✅ 7. 다국어 지원 (i18n)

- HMI 소프트웨어 대부분 **다국어 텍스트 테이블** 제공
- 운영자 국가별 언어 전환 가능
- 다국적 공정일수록 다국어 설계 필수

------

### ✅ 8. 예시 화면 구성 흐름

```
[시작 화면] → [메인 공정 흐름]  
           ↓  
    [개별 장비 운전 화면]  
           ↓  
    [알람 상세 확인]  
           ↓  
    [설정/유지보수 메뉴]
```

- 항상 '홈'으로 쉽게 복귀할 수 있도록
- 복잡한 메뉴 깊이 피하기 (최대 3~4단계 권장)

------

### ✅ 9. 실무 HMI 화면 샘플 예시

| 화면 구성          | 포함 요소                                    |
| ------------------ | -------------------------------------------- |
| 컨베이어 제어 화면 | Start/Stop 버튼, 모터 상태 표시, 속도 입력창 |
| 온도 제어 화면     | 온도 수치, 히터 상태, 타이머, 알람 경고      |
| 자동라인 전체      | 각 유닛 블록별 상태 도식, 색상 실시간 변화   |
| 관리자 메뉴        | 파라미터 입력, 레시피 관리, 로그인 인증      |

------

### ✅ 10. 실무 설계 팁

| 항목             | 팁                                          |
| ---------------- | ------------------------------------------- |
| 공정 흐름 시각화 | 현장 설비와 최대한 유사하게 배치            |
| 숫자 입력        | 슬라이더, 숫자패드 병행 제공                |
| 알람 발생 시     | 반드시 즉시 화면상 강조                     |
| 조작 이중 확인   | 긴급동작은 팝업 확인 삽입                   |
| 터치 오작동 대비 | 일정 무반응 구간 이후 재시작 화면 복귀 설정 |

------

### ✅ 정리

- 터치스크린 HMI는 **실제 기계 제어의 얼굴**
- **화면 배치, 색상, 크기, 피드백 구조** 모두 작업자의 **실수 방지**를 중심으로 설계
- **태그 연결 정확성**과 **통신 신뢰성 확보**가 가장 중요한 기술적 핵심
- 현장 경험이 쌓일수록 UI가 단순해지고 안정성이 높아진다

## 10.3 알람, 트렌드, 레시피 구성

*(HMI 시스템에서 실시간 운전 감시, 이력 분석, 공정 설정을 지원하는 핵심 구성 요소 설계)*

------

### ✅ 개요

HMI 시스템이 단순히 화면만 제공하는 시대는 끝났다.
 **알람 시스템**, **트렌드 이력 기록**, **레시피 관리**는 현대 HMI의 **3대 핵심 기능**이다.
 이들은 **현장 운영의 안정성, 품질 유지, 생산 효율성**에 직접적인 영향을 준다.

------

### ✅ 1. 알람 시스템 구성

#### 📌 알람이란?

- **PLC 내부 상태 → HMI로 전송 → 경고/에러 표시**
- 안전/장비 보호/공정 품질 유지에 필수

#### 📌 알람 발생 흐름

```
[ PLC 감지 ] → [ 알람 태그 ON ] → [ HMI 알람 표시 ] → [ HMI 알람 이력 기록 ]
```

#### 📌 알람 분류

| 레벨               | 의미      | 표시 예시      |
| ------------------ | --------- | -------------- |
| 정보 (Info)        | 상태 정보 | 파라미터 변경  |
| 경고 (Warning)     | 조치 필요 | 온도 이상 경향 |
| 위험 (Alarm)       | 즉각 조치 | 과전류 발생    |
| 치명적 (Emergency) | 즉시 정지 | 비상 정지      |

#### 📌 알람 구성 요소

| 요소        | 설명                      |
| ----------- | ------------------------- |
| 발생 시간   | 알람 발생 시각 기록       |
| 알람 코드   | 고유 번호 부여            |
| 알람 메시지 | 상세 원인 설명            |
| 확인 상태   | 확인 여부 관리 (ACK 기능) |
| 이력 저장   | 장기 보관 가능성          |

#### 📌 알람 설계 팁

- 모든 PLC 알람 태그를 **HMI 알람 테이블과 1:1 매칭**
- 긴급 알람일수록 **점멸, 팝업, 음향 경보** 적용
- 알람 발생 시 HMI 상단 **상태바 항상 표시**

------

### ✅ 2. 트렌드 시스템 구성

#### 📌 트렌드란?

- **시간에 따른 변수 변화를 실시간으로 그래프화**
- 품질 분석, 이상 탐지, 유지보수에 필수 도구

#### 📌 기본 구성 요소

| 요소        | 설명                            |
| ----------- | ------------------------------- |
| 변수 선택   | 표시할 PLC 변수 (온도, 압력 등) |
| 시간 축     | 실시간, 단기, 장기 전환 가능    |
| 샘플링 주기 | 100ms ~ 10초 (데이터 부하 고려) |
| 이력 저장   | 최대 보관 기간 설정             |

#### 📌 실시간 트렌드 예시

```
[PLC → HMI → 그래프 패널 표시]
  - 온도 상승 → 히터 제어 확인
  - 압력 변화 → 밸브 동작 확인
```

#### 📌 이력 트렌드 활용 예

- 장기 품질 이력 분석
- 공정 튜닝 최적화
- 에러 발생 시 과거 원인 추적

#### 📌 트렌드 설계 팁

- 중요 변수 그룹은 샘플링 주기 차등 적용
- 이력 데이터 백업 경로 이중화 (내부 메모리 + 외부 저장소)

------

### ✅ 3. 레시피 시스템 구성

#### 📌 레시피란?

- **공정 조건의 사전 설정값 집합**
- 제품별, 작업별 빠른 조건 변경 가능

#### 📌 레시피 데이터 구성 예시

| 항목      | 설명        | 변수              |
| --------- | ----------- | ----------------- |
| 제품명    | 표시 이름   | String            |
| 목표 온도 | 제어값      | `Target_Temp`     |
| 공정 시간 | 타이머 설정 | `Process_Time`    |
| 압력 설정 | 유압 설정   | `Target_Pressure` |

#### 📌 레시피 사용 흐름

```
운영자 → 레시피 선택 → HMI → PLC 변수 세팅 → 즉시 적용
```

#### 📌 레시피 저장방식

| 저장 위치        | 특징                        |
| ---------------- | --------------------------- |
| HMI 내장 메모리  | 접근속도 빠름               |
| PLC 내부 저장    | 전원 복귀 시 자동 복구 가능 |
| 외부 USB/SD 카드 | 대용량, 백업 용이           |
| 클라우드 서버    | 중앙 관리, 이력 보관        |

#### 📌 레시피 설계 팁

- 레시피마다 버전 관리 (날짜, 작성자 기록)
- 수동 입력 오류 방지 위해 범위 제한, 입력 검증 적용
- 레시피 백업/복구 기능 반드시 구현

------

### ✅ 4. 알람-트렌드-레시피 통합 활용 예

- 레시피 설정값 적용 → 트렌드로 품질 안정성 확인
- 트렌드 변화 감지 → 알람 시스템이 즉시 경고
- 알람 이력과 트렌드 이력 비교 → 문제 발생 원인 추적

------

### ✅ 5. 실무 설계 실전 예시 화면 흐름

```
메인 화면  
   ↓
공정 운전 화면  
   ↓
알람 모니터링 화면 (실시간 발생 감시)  
   ↓
트렌드 이력 분석 화면  
   ↓
레시피 관리 화면 (제품 변경 시 적용)
```

------

### ✅ 6. 시스템 안전성 확보를 위한 설계 원칙

| 요소             | 설명                                        |
| ---------------- | ------------------------------------------- |
| 이중 기록        | 알람, 트렌드 이력은 이중 저장 (내장 + 외장) |
| 암호화 및 인증   | 레시피 관리 화면은 관리자 권한 부여         |
| 이력 검색 기능   | 알람코드, 기간, 장치별 검색 기능 포함       |
| 알람 진단 보고서 | 알람 이력 자동 보고서 출력 기능 탑재        |

------

### ✅ 정리

- **알람 시스템** → 실시간 장애 감시와 사고 방지
- **트렌드 시스템** → 공정 품질 안정화 및 분석 도구
- **레시피 시스템** → 다품종 소량생산 체계의 자동화 핵심

HMI 시스템의 완성도는 **이 3대 시스템을 얼마나 정교하게 통합 설계했느냐**에 좌우된다.

## 10.4 SCADA 시스템 개요

*(PLC 상위 통합 시스템으로서의 SCADA 본질, 구조, 역할 정리)*

------

### ✅ 개요

**SCADA (Supervisory Control And Data Acquisition)** 시스템은
 **복수의 PLC·장비·공정을 통합하여 중앙에서 실시간 감시, 제어, 이력 수집, 분석, 보고를 수행하는 고급 상위 시스템**이다.

현장 단위 제어를 담당하는 PLC와 HMI를 **상위에서 통합·조정·최적화**하는 것이 SCADA의 핵심 역할이다.

------

### ✅ 1. SCADA의 기본 역할

| 기능          | 설명                                  |
| ------------- | ------------------------------------- |
| 실시간 감시   | PLC, 센서, I/O 상태 실시간 표시       |
| 원격 제어     | 원격에서 설비 가동·정지·파라미터 조정 |
| 알람 관리     | 실시간 경보 감지, 이력 기록, 보고     |
| 이력 수집     | 공정 데이터 장기 저장 및 추이 분석    |
| 보고서 생성   | 품질, 생산성, 운영 리포트 자동 생성   |
| 유지보수 지원 | 장애 이력 분석, 예방정비 지원         |

------

### ✅ 2. SCADA 시스템의 기본 구조

```
┌─────────────────────────────────────┐
│     클라이언트 (Operator Station)     │
│    - 실시간 화면, 알람 모니터, 제어 명령 │
└─────────────────────────────────────┘
           ↓ (네트워크)
┌──────────────────────────────────┐
│          SCADA 서버 (데이터베이스)  │
│  - 이력 저장, 알람 기록, 트렌드 저장  │
└──────────────────────────────────┘
           ↓ (프로토콜 변환기)
┌──────────────────────────────────┐
│        PLC, RTU, 장비 제어단       │
└──────────────────────────────────┘
```

- **SCADA 서버**가 중심, 클라이언트-서버 아키텍처
- 수백~수천 개 PLC 데이터를 실시간으로 통합 관리 가능

------

### ✅ 3. SCADA 구성요소 상세

| 구성 요소          | 기능                                            |
| ------------------ | ----------------------------------------------- |
| 데이터 수집 모듈   | PLC, RTU, 장비로부터 데이터 수집                |
| 통신 드라이버      | MODBUS, OPC, Profinet, EtherNet/IP 등 다수 지원 |
| 알람 관리 시스템   | 실시간 경고 감지, 이력 기록                     |
| 트렌드 및 이력 DB  | 장기 데이터 저장, 통계 분석                     |
| 그래픽 화면 생성기 | 공정 흐름도, 제어 화면 설계                     |
| 보고서 엔진        | 생산성, 장애, 품질 분석 리포트 생성             |
| 사용자 권한 시스템 | 다단계 권한 부여, 보안 강화                     |

------

### ✅ 4. SCADA와 HMI의 차이

| 항목        | HMI              | SCADA                     |
| ----------- | ---------------- | ------------------------- |
| 제어 대상   | 단일 장비        | 복수 장비 전체 공정       |
| 위치        | 로컬 장비 부착   | 중앙 통제실 또는 서버룸   |
| 데이터 기록 | 기본 이력 (짧음) | 장기 이력 (수개월~수년)   |
| 확장성      | 제한적           | 고도 확장 가능            |
| 보고서 기능 | 제한적           | 고급 자동 보고서 생성     |
| 보안 관리   | 기본 로그인      | 중앙 통합 인증, 이중 보안 |

------

### ✅ 5. SCADA 시스템 주요 상용 솔루션

| 제품              | 제조사               | 특징                           |
| ----------------- | -------------------- | ------------------------------ |
| WinCC             | Siemens              | Profinet, OPC UA 통합          |
| FactoryTalk SCADA | Rockwell             | EtherNet/IP 최적화             |
| iFIX              | GE                   | OPC, SQL DB 연동 강력          |
| Citect SCADA      | Schneider            | 전통적 산업용 표준             |
| Ignition          | Inductive Automation | MQTT, 클라우드, IIoT 통합 최적 |

------

### ✅ 6. SCADA 실전 구성 예시

```
현장 PLC (20대)
       ↓
RTU/게이트웨이 (필드 네트워크 집선)
       ↓
SCADA 서버 (중앙 통합 DB, OPC UA 기반 수집)
       ↓
운영자 스테이션 (Operator Console)
       ↓
생산관리 MES 연계, 클라우드 분석 시스템 연동
```

------

### ✅ 7. SCADA 설계 시 고려사항

| 요소        | 설명                                   |
| ----------- | -------------------------------------- |
| 통신 안정성 | 이중화 네트워크 (Ring 구조 권장)       |
| 데이터 부하 | 중요도별 태그 그룹핑, 샘플링 주기 설정 |
| 이중화 서버 | Hot-Standby, 장애 대응 설계            |
| 보안        | 사용자 인증, 이중 로그인, VPN          |
| 표준화      | OPC UA 중심 통합 플랫폼 추천           |

------

### ✅ 8. SCADA의 확장 방향 (현대 스마트팩토리)

| 기술         | 적용 분야                              |
| ------------ | -------------------------------------- |
| OPC UA       | 이기종 PLC 통합                        |
| MQTT         | 클라우드 데이터 송신                   |
| MES 연계     | 생산 관리 시스템 통합                  |
| AI 기반 분석 | 이상 예지정비 (Predictive Maintenance) |
| IIoT         | 센서 레벨 데이터까지 통합 수집         |

------

### ✅ 정리

- SCADA는 **PLC를 포함한 전체 공정을 중앙 통제·감시·최적화**하는 핵심 상위 시스템
- 현대 자동화 시스템은 **PLC → SCADA → MES/ERP → 클라우드**로 계층화됨
- **통신 안정성, 이력 정확성, 운영자 UX, 이중화 설계**가 SCADA의 핵심 성공 포인트

## 10.5 데이터 로깅 및 원격 모니터링

*(SCADA/HMI 시스템의 장기 이력 수집, 분석, 외부 원격 운영을 위한 핵심 설계 기법)*

------

### ✅ 개요

**데이터 로깅 (Data Logging)**은 SCADA/HMI 시스템의 핵심 기능 중 하나로,
 PLC·센서로부터 수집한 데이터를 **장기적으로 저장하고 분석 가능하게 만드는 이력 관리 시스템**이다.
 이 로깅 데이터는 이후 **품질 분석, 생산성 개선, 장애 추적, 예방정비, 최적화** 등에 광범위하게 활용된다.

동시에 **원격 모니터링(Remote Monitoring)**을 통해 관리자는
 외부에서 실시간으로 공장의 상황을 감시하고, 일부 제어까지 수행할 수 있다.

------

### ✅ 1. 데이터 로깅 시스템 구조

```
[PLC, RTU] → [SCADA 실시간 수집] → [이력 DB (History Database)] → [분석/보고서]
```

#### 📌 주요 저장 데이터 유형

| 데이터 유형   | 예시                        |
| ------------- | --------------------------- |
| 운전 상태     | 모터 ON/OFF, 생산 속도      |
| 공정 변수     | 온도, 압력, 유량, 진동 등   |
| 알람 이력     | 발생시간, 원인, 대응        |
| 품질 데이터   | 제품별 생산 기록, 검사 결과 |
| 에너지 사용량 | 전력, 가스, 스팀 소모량     |

------

### ✅ 2. 데이터 로깅 주기 설계

| 데이터 중요도    | 추천 샘플링 주기   |
| ---------------- | ------------------ |
| 긴급 이벤트      | 실시간 (100~500ms) |
| 주요 운전 변수   | 1~5초              |
| 공정 품질 이력   | 10~60초            |
| 장기 통계 데이터 | 1분~10분 간격      |

#### 📌 **데이터 그룹화(Grouping)** 로 네트워크 부하 최적화 가능

------

### ✅ 3. 로깅 시스템 아키텍처 예시

```
[PLC] ↔ [SCADA Server]
  ↓ 실시간 태그 수집
[History Database (SQL, InfluxDB, TimeSeries DB)]
  ↓
[데이터 분석 서버] → [보고서 엔진, BI Tool]
```

- 대규모 시스템은 **SCADA와 이력 DB를 분리**
- 시간 기반의 **Time Series Database (TSDB)** 사용 증가

------

### ✅ 4. 데이터 로깅 소프트웨어 예시

| 제품                      | 특징                                     |
| ------------------------- | ---------------------------------------- |
| WinCC Historian (Siemens) | SCADA 연동 통합 DB                       |
| iFIX Historical Database  | GE SCADA 내장 이력기록                   |
| FactoryTalk Historian     | Rockwell 통합 이력 시스템                |
| Ignition Historian        | SQL 기반 고성능 TSDB 지원                |
| InfluxDB                  | 오픈소스 Time Series DB (IIoT 연동 최적) |

------

### ✅ 5. 데이터 보관 정책

| 항목        | 기준                                      |
| ----------- | ----------------------------------------- |
| 보관 기간   | 6개월~10년 (품질 데이터는 장기 보관 권장) |
| 백업 주기   | 일간, 주간 이중 백업 권장                 |
| 데이터 압축 | 장기 이력 데이터는 압축 저장 활용         |
| 보안 관리   | 암호화, 접근권한 제한                     |

------

### ✅ 6. 원격 모니터링 시스템 구조

#### 📌 일반 구성

```
[현장 PLC + SCADA]
        ↓
[인터넷/VPN]
        ↓
[원격 클라이언트 (PC, Mobile App)]
```

#### 📌 사용 기술

| 기술    | 설명                         |
| ------- | ---------------------------- |
| VPN     | 보안 터널로 원격 연결        |
| Web HMI | 브라우저 기반 HMI 접근       |
| MQTT    | 클라우드 서버 통해 원격 구독 |
| OPC UA  | 방화벽 통과 가능한 표준 통신 |

------

### ✅ 7. 원격 모니터링 기능 예시

| 기능                  | 상세                                   |
| --------------------- | -------------------------------------- |
| 실시간 공정 상태 조회 | 장비 상태, 생산량, 알람 확인           |
| 알람 발생 즉시 알림   | SMS, 이메일, 모바일 푸시               |
| 제어 명령 일부 허용   | 관리자 등급 로그인 후 제한적 제어 가능 |
| 데이터 이력 조회      | 원격에서 트렌드 그래프 확인            |

------

### ✅ 8. 원격 접속 보안 설계

| 위험        | 대응책                                |
| ----------- | ------------------------------------- |
| 해킹 위험   | VPN 전용선 사용, 이중 인증 적용       |
| 데이터 노출 | SSL/TLS 암호화                        |
| 무단 조작   | 사용자 권한 계층 분리, 제어 제한 설정 |
| 원격 장애   | 이중화 서버, Watchdog 적용            |

------

### ✅ 9. 실무 적용 예시

| 분야           | 구현 예                             |
| -------------- | ----------------------------------- |
| 제조 공장      | MES ↔ SCADA ↔ 클라우드 모니터링     |
| 에너지 관리    | 발전소 → 중앙 SCADA → 원격 유지보수 |
| 유틸리티 관리  | 수도, 가스, 전력 → 원격 상태 감시   |
| 해외 공장 연계 | 각국 공장 SCADA → 중앙 서버 통합    |

------

### ✅ 10. 데이터 로깅 & 원격 모니터링 통합 흐름 예

```
[PLC 제어] → [SCADA 수집] → [이력 DB 기록]
      ↘            ↘
   [알람 발생]  [원격 클라우드 서버 전송]
         ↘
[운영자 모바일 앱 실시간 알림]
```

- **현장 안정성 확보 + 중앙 빅데이터 분석 + 경영 통합 모니터링** 완성

------

### ✅ 정리

- **데이터 로깅**: 공정 품질 관리, 추적성, 유지보수에 필수
- **원격 모니터링**: 현장 관리자의 실시간 현장 가시성 확보
- **IoT 기반 통합**: MQTT, OPC UA, VPN 활용으로 안전하고 유연한 시스템 구축 가능

## 10.6 PLC Tag 매핑 및 연동

*(PLC와 HMI/SCADA가 통신하기 위한 핵심 구조인 태그 설계와 데이터 연동 기법 정리)*

------

### ✅ 개요

**PLC 태그 매핑(Tag Mapping)**이란,
 PLC 내부 메모리(변수)를 HMI·SCADA·상위 시스템과 통신하기 위해
 **명확하게 주소화하고 매칭하는 작업**이다.

이 매핑 구조가 깔끔하게 정리되어야 전체 시스템이:

- **신뢰성 있게 동작**하고,
- **유지보수가 쉬워지고**,
- **통합 확장이 가능**해진다.

------

### ✅ 1. 태그의 개념

| 용어      | 설명                               |
| --------- | ---------------------------------- |
| PLC Tag   | PLC 내부 변수명 (메모리 주소 포함) |
| HMI Tag   | HMI 프로젝트 내 매칭된 통신용 변수 |
| SCADA Tag | 중앙 서버 통합 변수                |

------

#### 📌 예시

| PLC 내부 변수    | 설명             | HMI 연결           |
| ---------------- | ---------------- | ------------------ |
| `MotorStart`     | 모터 ON/OFF 명령 | HMI 버튼 연결      |
| `MotorSpeed`     | 모터 속도 설정값 | HMI 입력창 연결    |
| `Alarm_OverHeat` | 과열 경고        | HMI 알람 표시 연결 |
| `Temperature`    | 현재 온도값      | HMI 수치 표시 연동 |

------

### ✅ 2. 태그 매핑의 목적

- **HMI/SCADA와 PLC 간 정확한 데이터 송수신**
- **중복 주소·충돌 방지**
- **유지보수 시 가독성 확보**

------

### ✅ 3. 태그 정의 방식

| 방식                                       | 특징                      | 적용 예                       |
| ------------------------------------------ | ------------------------- | ----------------------------- |
| **고정 메모리 주소 (Symbolic Addressing)** | PLC 주소 직접 지정        | `D100`, `M0`, `DB1.DBD0`      |
| **심볼릭 태그 이름 (Named Tag)**           | 변수명으로 주소 자동 매칭 | `MotorSpeed`, `Temp_Setpoint` |

------

#### 📌 심볼릭 태그 방식이 현대 표준

- 가독성 뛰어남
- 확장성, 유지보수성 우수
- HMI에서 태그 읽기 쉽게 가능 (예: Siemens TIA Portal 자동 스캔 지원)

------

### ✅ 4. 태그 그룹화 설계 원칙

#### 📌 태그 그룹 설계 예시

| 그룹               | 포함 변수                  |
| ------------------ | -------------------------- |
| 운전 제어 그룹     | Start, Stop, Mode          |
| 상태 모니터 그룹   | 센서, 온도, 압력           |
| 알람 그룹          | 과열, 센서 오류, 압력 이상 |
| 설정 파라미터 그룹 | 목표 속도, 설정값          |
| 유지보수 그룹      | 진단 코드, 동작 카운터     |

- 그룹화로 태그 관리 편의성 증가
- 통신 드라이버 최적화 가능 (그룹별 주기 차등)

------

### ✅ 5. 통신 시 태그 매핑 흐름

```
PLC → (통신 드라이버) → HMI 태그 라이브러리 → 화면 오브젝트 연결
```

- HMI 소프트웨어에서 PLC 드라이버 설정 후 태그 불러오기 (자동/수동)
- 오브젝트(버튼, 표시기, 그래프 등)에 태그를 직접 연결

------

### ✅ 6. 태그 네이밍 규칙 예시

| 규칙             | 예시                     | 비고             |
| ---------------- | ------------------------ | ---------------- |
| 접두어 활용      | `CMD_`, `STS_`, `ALM_`   | 명확한 역할 구분 |
| 소속 장비 표시   | `CONV1_SPEED`            | 장비 식별        |
| 데이터 형식 표시 | `_BOOL`, `_INT`, `_REAL` | 자료형 일관성    |
| 알람 순번        | `ALM_001_OVERHEAT`       | 이력 조회용 활용 |

------

### ✅ 7. 태그형식 매칭 (HMI ↔ PLC 자료형 주의)

| PLC 자료형 | HMI 자료형 | 주의사항                 |
| ---------- | ---------- | ------------------------ |
| BOOL       | BOOL       | ON/OFF 표시기            |
| INT        | INT        | 16bit 정수               |
| REAL       | FLOAT      | 소수점 수치 표시         |
| STRING     | TEXT       | 모델명, 작업자명 등 표시 |

------

### ✅ 8. 이기종 PLC간 태그 통합 전략

- **OPC UA 태그 브라우징 사용** (자동 인식 지원)
- 태그 매핑 서버 활용 (e.g. Kepware, Matrikon)
- 통합 데이터 서버에서 **중앙 태그 DB화** (MES, ERP 연계)

------

### ✅ 9. 태그 유지보수 관리 팁

| 관리 방법           | 설명                                |
| ------------------- | ----------------------------------- |
| 태그 목록 문서화    | 통신 변수 목록 표준화               |
| 변경이력 관리       | 버전별 태그 변경 기록               |
| 태그 백업 자동화    | PLC·HMI 프로젝트별 태그 스냅샷 백업 |
| 신규 장비 통합 준비 | 태그 명명 규칙 미리 확립            |

------

### ✅ 10. 실전 태그 매핑 프로젝트 흐름

```
1️⃣ PLC 변수명 설계 →  
2️⃣ HMI/SCADA 통신 드라이버 연결 →  
3️⃣ 자동 태그 스캔 (가능 시) →  
4️⃣ HMI 오브젝트 ↔ 태그 매핑 →  
5️⃣ 통신 테스트 및 오류 확인 →  
6️⃣ 알람 시스템 통합 →  
7️⃣ 이력 기록 연동 →  
8️⃣ 원격 시스템 태그 확장
```

------

### ✅ 정리

- **PLC 태그 매핑은 모든 통신과 화면 설계의 출발점**
- **심볼릭 네이밍 체계**가 유지보수성을 결정
- 태그 설계 초기에 잘 정리해놓아야 확장 시 혼란 방지
- HMI, SCADA, 클라우드 통합까지 확장 가능한 체계적 태그 시스템 구축이 최적의 산업제어 설계